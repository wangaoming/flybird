{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\PipeGroup.js"],"names":["cc","Class","extends","Component","properties","topPipeMinHeight","bottomPipeMinHeight","spacingMinValue","spacingMaxValue","topPipe","Node","bottomPipe","init","pipeManager","_initPositionX","_initPositionY","visibleSize","director","getVisibleSize","sceneLeft","width","sceneRight","node","x","recylceX","Math","max","topPipeMaxY","height","bottomPipeMinY","find","y","spacing","random","update","dt","isRunning","pipeMoveSpeed","recyclePipe"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACR;AACAC,0BAAkB,GAFV;AAGR;AACAC,6BAAqB,GAJb;AAKR;AACAC,yBAAiB,GANT;AAOR;AACAC,yBAAiB,GART;AASR;AACAC,iBAAST,GAAGU,IAVJ;AAWR;AACAC,oBAAYX,GAAGU;AAZP,KAFP;;AAiBLE,QAjBK,gBAiBAC,WAjBA,EAiBa;AACd,aAAKA,WAAL,GAAmBA,WAAnB;AACA,aAAKC,cAAL;AACA,aAAKC,cAAL;AACH,KArBI;;;AAuBL;AACAD,kBAxBK,4BAwBW;AACZ,YAAIE,cAAchB,GAAGiB,QAAH,CAAYC,cAAZ,EAAlB,CADY,CACoC;AAChD,YAAIC,YAAY,CAACH,YAAYI,KAAb,GAAqB,CAArC,CAFY,CAE4B;AACxC,YAAIC,aAAaL,YAAYI,KAAZ,GAAoB,CAArC,CAHY,CAG4B;AACxC,aAAKE,IAAL,CAAUC,CAAV,GAAcF,aAAa,GAA3B;AACA,aAAKG,QAAL,GAAgBL,YAAYM,KAAKC,GAAL,CAAS,KAAKjB,OAAL,CAAaW,KAAtB,EAA6B,KAAKT,UAAL,CAAgBS,KAA7C,CAA5B;AACH,KA9BI;;;AAgCL;AACAL,kBAjCK,4BAiCW;AACZ,YAAIC,cAAchB,GAAGiB,QAAH,CAAYC,cAAZ,EAAlB;AACA,YAAIS,cAAcX,YAAYY,MAAZ,GAAqB,CAArB,GAAyB,KAAKvB,gBAAhD;AACA,YAAIwB,iBAAiB7B,GAAG8B,IAAH,CAAQ,eAAR,EAAyBC,CAAzB,GAA6B,KAAKzB,mBAAvD,CAHY,CAGgE;AAC5E,YAAI0B,UAAU,KAAKzB,eAAL,GAAuBkB,KAAKQ,MAAL,MAAiB,KAAKzB,eAAL,GAAuB,KAAKD,eAA7C,CAArC;AACA,aAAKE,OAAL,CAAasB,CAAb,GAAiBJ,cAAcF,KAAKQ,MAAL,MAAiBN,cAAcE,cAAd,GAA+BG,OAAhD,CAA/B;AACA,aAAKrB,UAAL,CAAgBoB,CAAhB,GAAoB,KAAKtB,OAAL,CAAasB,CAAb,GAAiBC,OAArC;AACH,KAxCI;AA0CLE,UA1CK,kBA0CEC,EA1CF,EA0CM;AACP,YAAI,CAAC,KAAKtB,WAAL,CAAiBuB,SAAtB,EAAiC;AAC7B;AACH;AACD;AACA,aAAKd,IAAL,CAAUC,CAAV,IAAe,KAAKV,WAAL,CAAiBwB,aAAjB,GAAiCF,EAAhD;AACA;AACA,YAAI,KAAKb,IAAL,CAAUC,CAAV,GAAc,KAAKC,QAAvB,EAAiC;AAC7B,iBAAKX,WAAL,CAAiByB,WAAjB,CAA6B,IAA7B;AACH;AACJ;AApDI,CAAT","file":"PipeGroup.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        /** 上方管子最小高度 */\n        topPipeMinHeight: 100,\n        /** 下方管子最小高度 */\n        bottomPipeMinHeight: 100,\n        /** 上、下管子垂直间距最小值 */\n        spacingMinValue: 250,\n        /** 上、下管子垂直间距最大值 */\n        spacingMaxValue: 300,\n        /** 上方管子节点 */\n        topPipe: cc.Node,\n        /** 下方管子节点 */\n        bottomPipe: cc.Node,\n    },\n\n    init(pipeManager) {\n        this.pipeManager = pipeManager;\n        this._initPositionX();\n        this._initPositionY();\n    },\n\n    /** 设置节点在x轴的初始位置 */\n    _initPositionX(){\n        let visibleSize = cc.director.getVisibleSize(); // 场景可见区域大小\n        let sceneLeft = -visibleSize.width / 2; // Canvas锚点在中心，Canvas的左侧就是在锚点左边距离一半宽度的地方\n        let sceneRight = visibleSize.width / 2; // Canvas锚点在中心，Canvas的右侧就是在锚点右边距离一半宽度的地方\n        this.node.x = sceneRight + 300;\n        this.recylceX = sceneLeft - Math.max(this.topPipe.width, this.bottomPipe.width);\n    },\n\n    /** 设置上、下管道y轴位置以及之间的距离 */\n    _initPositionY(){\n        let visibleSize = cc.director.getVisibleSize();\n        let topPipeMaxY = visibleSize.height / 2 - this.topPipeMinHeight;\n        let bottomPipeMinY = cc.find(\"Canvas/ground\").y + this.bottomPipeMinHeight; // Prefab不能通过属性检查器获取节点，只能动态查找\n        let spacing = this.spacingMinValue + Math.random() * (this.spacingMaxValue - this.spacingMinValue);\n        this.topPipe.y = topPipeMaxY - Math.random() * (topPipeMaxY - bottomPipeMinY - spacing);\n        this.bottomPipe.y = this.topPipe.y - spacing;\n    },\n\n    update(dt) {\n        if (!this.pipeManager.isRunning) {\n            return;\n        }\n        // 实时更新管道位置\n        this.node.x += this.pipeManager.pipeMoveSpeed * dt;\n        // 超出屏幕显示范围了，就可以回收本对象了\n        if (this.node.x < this.recylceX) {\n            this.pipeManager.recyclePipe(this);\n        }\n    }\n});"]}